---
import DarkModeSwitcher from "./DarkModeSwitcher.astro";
import NavLink from "./NavLink.astro";
---

<header
  id="header-nav"
  class="cyber-header fixed top-0 w-full z-50 transition-all duration-500"
>
  <nav class="cyber-nav">
    <div class="nav-container">
      <!-- Logo/Brand -->
      <div class="cyber-brand">
        <a href="/" class="brand-link">
          <div class="brand-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2L2 7v10c0 5.55 3.84 10 8 9 4.16 1 8-3.45 8-9V7l-10-5z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </div>
          <span class="brand-text">
            <span class="brand-name">Mat√≠as Acebal</span>
          </span>
        </a>
      </div>

      <!-- Navigation Links -->
      <div class="nav-links">
        <NavLink href="#terminal" class="cyber-nav-link">
          <span class="nav-icon">üñ•Ô∏è</span>
          <span class="nav-text">Terminal</span>
          <div class="nav-glow"></div>
        </NavLink>
        
        <NavLink href="#experience" class="cyber-nav-link">
          <span class="nav-icon">üíº</span>
          <span class="nav-text">Experiencia</span>
          <div class="nav-glow"></div>
        </NavLink>
        
        <NavLink href="#proyectos" class="cyber-nav-link">
          <span class="nav-icon">ÔøΩ</span>
          <span class="nav-text">Proyectos</span>
          <div class="nav-glow"></div>
        </NavLink>
        
        <NavLink href="#certificaciones" class="cyber-nav-link">
          <span class="nav-icon">üèÜ</span>
          <span class="nav-text">Certificados</span>
          <div class="nav-glow"></div>
        </NavLink>
        
        <NavLink href="#skills" class="cyber-nav-link">
          <span class="nav-icon">‚ö°</span>
          <span class="nav-text">Skills</span>
          <div class="nav-glow"></div>
        </NavLink>
        
        <NavLink href="#sobre-mi" class="cyber-nav-link">
          <span class="nav-icon">üë®‚Äçüíª</span>
          <span class="nav-text">Sobre m√≠</span>
          <div class="nav-glow"></div>
        </NavLink>
      </div>

      <!-- Actions -->
      <div class="nav-actions">
        <DarkModeSwitcher />
        
        <a 
          href="mailto:acebalmatias2019@gmail.com" 
          class="cyber-contact-btn"
          aria-label="Contactar por email"
        >
          <span class="btn-text">Contactar</span>
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <polyline points="22,6 12,13 2,6"/>
          </svg>
          <div class="btn-glow"></div>
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Abrir men√∫">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu" id="mobile-menu">
      <div class="mobile-menu-content">
        <div class="mobile-links">
          <a href="#terminal" class="mobile-nav-link">
            <span class="mobile-icon">üñ•Ô∏è</span>
            <span>Terminal Interactiva</span>
          </a>
          <a href="#experience" class="mobile-nav-link">
            <span class="mobile-icon">üíº</span>
            <span>Experiencia</span>
          </a>
          <a href="#proyectos" class="mobile-nav-link">
            <span class="mobile-icon">üöÄ</span>
            <span>Proyectos</span>
          </a>
          <a href="#certificaciones" class="mobile-nav-link">
            <span class="mobile-icon">üèÜ</span>
            <span>Certificaciones</span>
          </a>
          <a href="#skills" class="mobile-nav-link">
            <span class="mobile-icon">‚ö°</span>
            <span>Habilidades</span>
          </a>
          <a href="#sobre-mi" class="mobile-nav-link">
            <span class="mobile-icon">üë®‚Äçüíª</span>
            <span>Sobre m√≠</span>
          </a>
        </div>
        
        <div class="mobile-actions">
          <a href="mailto:acebalmatias2019@gmail.com" class="mobile-contact-btn">
            <span>Contactar</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  .cyber-header {
    backdrop-filter: blur(20px);
    transition: all 0.3s ease;
    will-change: auto;
    z-index: 1000;
  }
  
  .cyber-nav {
    background: linear-gradient(90deg, 
      rgba(0, 0, 0, 0.05) 0%, 
      rgba(0, 255, 136, 0.02) 50%, 
      rgba(0, 0, 0, 0.05) 100%
    );
    border-bottom: 1px solid rgba(0, 255, 136, 0.15);
    padding: 1rem 0;
    position: relative;
    transition: all 0.3s ease;
  }
  
  .cyber-nav::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(0, 255, 136, 0.05) 50%, 
      transparent 100%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .cyber-header.scrolled .cyber-nav::before {
    opacity: 1;
  }
  
  .nav-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }
  
  /* Brand */
  .cyber-brand {
    flex-shrink: 0;
  }
  
  .brand-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    transition: all 0.3s ease;
  }
  
  .brand-icon {
    width: 2rem;
    height: 2rem;
    color: #00ff88;
    transition: all 0.3s ease;
    flex-shrink: 0;
  }
  
  .brand-text {
    display: flex;
    align-items: center;
  }
  
  .brand-name {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1f2937;
    transition: color 0.3s ease;
    white-space: nowrap;
  }
  

  
  .brand-link:hover .brand-icon {
    transform: scale(1.1);
    filter: drop-shadow(0 0 10px rgba(0, 255, 136, 0.5));
  }
  
  /* Navigation Links */
  .nav-links {
    display: flex;
    align-items: center;
    gap: 2rem;
    flex: 1;
    justify-content: center;
  }
  
  .cyber-nav-link {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.875rem;
    color: #4b5563;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .nav-icon {
    font-size: 1rem;
    transition: transform 0.3s ease;
  }
  
  .nav-text {
    position: relative;
    z-index: 2;
  }
  
  .nav-glow {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 255, 136, 0.05));
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .cyber-nav-link:hover {
    color: #059669;
    transform: translateY(-2px);
    text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
  }
  
  .cyber-nav-link:hover .nav-glow {
    opacity: 1;
    box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
  }
  
  .cyber-nav-link:hover .nav-icon {
    transform: scale(1.1);
    filter: drop-shadow(0 0 8px rgba(0, 255, 136, 0.6));
  }
  
  /* Actions */
  .nav-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-shrink: 0;
  }
  
  .cyber-contact-btn {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: rgba(0, 255, 136, 0.1);
    border: 1px solid rgba(0, 255, 136, 0.3);
    border-radius: 8px;
    color: #059669;
    font-weight: 600;
    font-size: 0.875rem;
    text-decoration: none;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .btn-text {
    position: relative;
    z-index: 2;
  }
  
  .btn-icon {
    width: 1rem;
    height: 1rem;
    transition: transform 0.3s ease;
    position: relative;
    z-index: 2;
  }
  
  .btn-glow {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.1));
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .cyber-contact-btn:hover {
    transform: translateY(-2px);
    border-color: rgba(0, 255, 136, 0.5);
    box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);
  }
  
  .cyber-contact-btn:hover .btn-glow {
    opacity: 1;
  }
  
  .cyber-contact-btn:hover .btn-icon {
    transform: translateX(2px);
  }
  
  /* Mobile Menu */
  .mobile-menu-btn {
    display: none;
    flex-direction: column;
    gap: 4px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 4px;
    transition: all 0.3s ease;
  }
  
  .hamburger-line {
    width: 20px;
    height: 2px;
    background: #059669;
    transition: all 0.3s ease;
    transform-origin: center;
  }
  
  .mobile-menu-btn:hover .hamburger-line {
    background: #00ff88;
  }
  
  .mobile-menu-btn.active .hamburger-line:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }
  
  .mobile-menu-btn.active .hamburger-line:nth-child(2) {
    opacity: 0;
  }
  
  .mobile-menu-btn.active .hamburger-line:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -6px);
  }
  
  .mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(20px);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 100;
  }
  
  .mobile-menu.active {
    opacity: 1;
    visibility: visible;
  }
  
  .mobile-menu-content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    gap: 3rem;
    padding: 2rem;
  }
  
  .mobile-links {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    text-align: center;
  }
  
  .mobile-nav-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-size: 1.25rem;
    font-weight: 600;
    color: #e5e7eb;
    text-decoration: none;
    transition: all 0.3s ease;
    padding: 1rem;
    border-radius: 8px;
  }
  
  .mobile-icon {
    font-size: 1.5rem;
  }
  
  .mobile-nav-link:hover {
    color: #00ff88;
    transform: translateX(10px);
  }
  
  .mobile-actions {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
  }
  
  .mobile-contact-btn {
    padding: 1rem 2rem;
    background: rgba(0, 255, 136, 0.1);
    border: 1px solid rgba(0, 255, 136, 0.3);
    border-radius: 8px;
    color: #00ff88;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
  }
  
  .mobile-contact-btn:hover {
    background: rgba(0, 255, 136, 0.2);
    transform: translateY(-2px);
  }
  
  /* Dark Mode */
  @media (prefers-color-scheme: dark) {
    .cyber-nav {
      background: linear-gradient(90deg, 
        rgba(0, 0, 0, 0.2) 0%, 
        rgba(0, 40, 30, 0.15) 50%, 
        rgba(0, 0, 0, 0.2) 100%
      );
      border-bottom: 1px solid rgba(0, 255, 136, 0.25);
    }
    
    .brand-name {
      color: #e5e7eb;
      text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
    }
    
    .cyber-nav-link {
      color: #d1d5db;
    }
    
    .cyber-nav-link:hover {
      color: #10b981;
      text-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
    }
  }
  
  :global(.dark) .cyber-nav {
    background: linear-gradient(90deg, 
      rgba(0, 0, 0, 0.2) 0%, 
      rgba(0, 40, 30, 0.15) 50%, 
      rgba(0, 0, 0, 0.2) 100%
    );
    border-bottom: 1px solid rgba(0, 255, 136, 0.25);
  }
  
  :global(.dark) .brand-name {
    color: #e5e7eb;
    text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
  }
  
  :global(.dark) .cyber-nav-link {
    color: #d1d5db;
  }
  
  :global(.dark) .cyber-nav-link:hover {
    color: #10b981;
    text-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
  }
  
  /* Responsive Design */
  @media (max-width: 1024px) {
    .nav-links {
      gap: 1.5rem;
    }
    
    .cyber-nav-link {
      padding: 0.5rem 0.75rem;
    }
    
    .nav-text {
      display: none;
    }
    
    .nav-icon {
      font-size: 1.25rem;
    }
  }
  
  @media (max-width: 768px) {
    .nav-container {
      padding: 0 1rem;
    }
    
    .nav-links,
    .nav-actions .cyber-contact-btn {
      display: none;
    }
    
    .mobile-menu-btn {
      display: flex;
    }
  }
  
  /* Header scroll effect */
  .cyber-header.scrolled {
    background: linear-gradient(90deg, 
      rgba(0, 0, 0, 0.85) 0%, 
      rgba(0, 20, 15, 0.9) 50%, 
      rgba(0, 0, 0, 0.85) 100%
    );
    border-bottom: 1px solid rgba(0, 255, 136, 0.4);
    backdrop-filter: blur(25px);
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 0 40px rgba(0, 255, 136, 0.1);
  }
  
  .cyber-header.scrolled .cyber-nav {
    padding: 0.75rem 0;
    border-bottom: none;
  }
</style>

<script>
  // Mobile menu functionality
  function initializeMobileMenu() {
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (!mobileMenuBtn || !mobileMenu) return;
    
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenuBtn.classList.toggle('active');
      mobileMenu.classList.toggle('active');
      document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
    });
    
    // Close menu when clicking on links
    const mobileLinks = mobileMenu.querySelectorAll('.mobile-nav-link, .mobile-contact-btn');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenuBtn.classList.remove('active');
        mobileMenu.classList.remove('active');
        document.body.style.overflow = '';
      });
    });
    
    // Close menu when clicking outside
    mobileMenu.addEventListener('click', (e) => {
      if (e.target === mobileMenu) {
        mobileMenuBtn.classList.remove('active');
        mobileMenu.classList.remove('active');
        document.body.style.overflow = '';
      }
    });
  }
  
  // Header scroll effect
  function initializeScrollEffect() {
    const header = document.getElementById('header-nav');
    if (!header) return;
    
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });
  }
  
  // Smooth scrolling for navigation links
  function initializeSmoothScroll() {
    const navLinks = document.querySelectorAll('a[href^="#"]');
    
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const href = link.getAttribute('href');
        if (!href) return;
        
        const targetId = href.slice(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
          const headerHeight = document.getElementById('header-nav')?.offsetHeight || 80;
          const offsetTop = targetElement.offsetTop - headerHeight - 20;
          
          window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
          });
        }
      });
    });
  }
  
  // Initialize everything
  document.addEventListener('DOMContentLoaded', () => {
    initializeMobileMenu();
    initializeScrollEffect();
    initializeSmoothScroll();
  });
</script>

